---
import { generateParagraph } from "@src/utils/generateParagraph";
import { markdownify } from "@src/utils/textConverter";
import AstroImage from "./helpers/AstroImage.astro";

interface Props {
  subtitle: string;
	title: string;
  image: string;
  description: string;
  banner_button_label: string;
  social_links: any;
}

const { subtitle, title, image, description, banner_button_label, social_links } = Astro.props;
const bannerContent = await markdownify(description ?? "");
---

<section class="py-16 md:py-20 overflow-hidden mb-4 md:mb-6">
  <div class="container">
    <div class="flex md:flex-row flex-col-reverse text-center md:text-start items-center justify-center gap-y-6 gap-10">
      <div class="max-w-2xl">
        <p class="mb-3 md:mb-5">{subtitle}</p>
        <h1 class="mb-5 md:mb-7 text-4xl sm:text-4xl md:text-[2.8rem] lg:text-[3.3rem]">
          {title}
        </h1>
        <div class="content mt-3 text-balance" set:html={generateParagraph(bannerContent)} />

        {(banner_button_label || social_links.enable) && (
          <div class="flex flex-wrap flex-col sm:flex-row items-center justify-center md:justify-start gap-5 mt-8">
            {banner_button_label && (
              <a class="btn btn-primary btn-sm capitalize" href="#posts" aria-label="View all posts">
                {banner_button_label}
                <svg class="ms-1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" color="currentColor"><path d="M2.5 12c0-4.478 0-6.718 1.391-8.109S7.521 2.5 12 2.5c4.478 0 6.718 0 8.109 1.391S21.5 7.521 21.5 12c0 4.478 0 6.718-1.391 8.109S16.479 21.5 12 21.5c-4.478 0-6.718 0-8.109-1.391S2.5 16.479 2.5 12"/><path d="M12 16V8m0 8c-.7 0-2.008-1.994-2.5-2.5M12 16c.7 0 2.008-1.994 2.5-2.5"/></g></svg>
              </a>
            )}

            {banner_button_label && social_links.enable && (
              <span class="text-sm opacity-50 mx-2 hidden sm:block">OR</span>
            )}

            {social_links.enable && (
              <div class="flex gap-3">
                {social_links.twitter && (
                  <a
                    class="h-10 w-10 rounded-clip grid place-content-center text-black/60 bg-black/10 dark:bg-white/10 hover:bg-primary dark:hover:bg-primary-dark hover:text-white transition-all relative z-10 after:content-[''] after:h-full after:w-full after:bg-body dark:after:bg-body-dark after:-z-10 after:absolute after:scale-95 after:rounded-clip after:transition-all hover:after:opacity-0"
                    href=""
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    <svg class="h-4 w-4" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
                  </a>
                )}
                {social_links.facebook && (
                  <a
                    class="h-10 w-10 rounded-clip grid place-content-center text-black/60 bg-black/10 dark:bg-white/10 hover:bg-primary dark:hover:bg-primary-dark hover:text-white transition-all relative z-10 after:content-[''] after:h-full after:w-full after:bg-body dark:after:bg-body-dark after:-z-10 after:absolute after:scale-95 after:rounded-clip after:transition-all hover:after:opacity-0"
                    href=""
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    <svg class="h-4 w-4" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M80 299.3V512H196V299.3h86.5l18-97.8H196V166.9c0-51.7 20.3-71.5 72.7-71.5c16.3 0 29.4 .4 37 1.2V7.9C291.4 4 256.4 0 236.2 0C129.3 0 80 50.5 80 159.4v42.1H14v97.8H80z"/></svg>
                  </a>
                )}
                {social_links.linkedin && (
                  <a
                    class="h-10 w-10 rounded-clip grid place-content-center text-black/60 bg-black/10 dark:bg-white/10 hover:bg-primary dark:hover:bg-primary-dark hover:text-white transition-all relative z-10 after:content-[''] after:h-full after:w-full after:bg-body dark:after:bg-body-dark after:-z-10 after:absolute after:scale-95 after:rounded-clip after:transition-all hover:after:opacity-0"
                    href=""
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    <svg class="h-4 w-4" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.3 448H7.4V148.9h92.9zM53.8 108.1C24.1 108.1 0 83.5 0 53.8a53.8 53.8 0 0 1 107.6 0c0 29.7-24.1 54.3-53.8 54.3zM447.9 448h-92.7V302.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.7V448h-92.8V148.9h89.1v40.8h1.3c12.4-23.5 42.7-48.3 87.9-48.3 94 0 111.3 61.9 111.3 142.3V448z"/></svg>
                  </a>
                )}
              </div>
            )}
          </div>
        )}
      </div>
      {title}
      <div class="flex-shrink-0">
        <AstroImage
          class="rounded-clip bg-white dark:bg-dark-dark h-32 w-32 sm:h-40 sm:w-40 lg:h-[200px] lg:w-[200px] object-cover"
          src={image}
          alt=""
          width={400}
          height={400}
          loading="eager"
        />
      </div>
    </div>
  </div>
</section>